<!doctype html>
<html lang="en">
  <head>
    <script src="/assets/js/lib/eruda/eruda.js"></script>
    <script>eruda.init()</script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="Light" />
    <meta name="description" content="A fast, simple, and highly customizable proxy." />
    <meta name="google-adsense-account" content="ca-pub-2804638430420139" />
    <title id="title">Light Proxy</title>
    <link rel="stylesheet" id="themecss" href="/assets/css/main.css" />
    <!--UV-->
    <script src="/@/bundle.js"></script>
    <script src="/@/config.js"></script>
    <!--Dynamic-->
    <script src="/dynamic/dynamic.worker.js"></script>
    <script src="/dynamic/dynamic.config.js"></script>
    <!--Preload-->
    <script src="/assets/js/preload.js"></script>
    <script>
      registerSW();
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-180MJ5GDVH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-180MJ5GDVH");
    </script>
    <style>
      /* Add your custom styles here */
      body {
        background-color: #f5f7fa;
        color: #333;
        font-family: Arial, sans-serif;
      }
      .navbar {
        background-color: #34495e;
        padding: 10px 20px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .navbarLink {
        margin: 0 15px;
        text-align: center;
        color: white;
        text-decoration: none;
        font-weight: bold;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .navbarLink img {
        max-width: 50px;
        margin-bottom: 5px;
      }
      .navbarLink p {
        margin: 0;
      }
      .card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 20px;
        max-width: 500px;
        margin: 20px auto;
        text-align: center;
      }
      .bg {
        padding: 20px;
      }
      .searchbar {
        margin: 20px 0;
      }
      .searchbar-wrapper {
        display: flex;
        align-items: center;
      }
      .search-icon {
        margin-right: 10px;
      }
      .searchbar-input {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
      }
      .footer {
        color: #3498db;
        text-decoration: none;
        margin: 0 5px;
      }
      .footer:hover {
        text-decoration: underline;
      }
      .selected {
        background-color: #f0f0f0;
      }
      .suggestion-list {
        background: white;
        border: 1px solid #ccc;
        border-radius: 5px;
        max-height: 150px;
        overflow-y: auto;
        margin: 10px 0;
      }
      .suggestion-list div {
        padding: 10px;
        cursor: pointer;
      }
      .suggestion-list div:hover {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <a href="/" class="navbarLink">
        <img src="assets/imgs/new_home.png" alt="Home" />
        <p>Home</p>
      </a>
      <a href="/g" class="navbarLink">
        <img src="assets/imgs/new_game.png" alt="Games" />
        <p>Games</p>
      </a>
      <a href="/a" class="navbarLink">
        <img src="assets/imgs/new_apps.png" alt="Apps" />
        <p>Apps</p>
      </a>
      <a href="/s" class="navbarLink">
        <img class="settingnav" src="assets/imgs/new_settings.png" alt="Settings" />
        <p>Settings</p>
      </a>
    </div>
    <center>
      <h3 style="margin-bottom: 30px; text-align: left; margin-left: 1%; margin-top: 10px;">
        Light
        <span style="font-size: 45%; vertical-align: top; font-weight: bolder; color: var(--theme-color);">V3.0.0</span>
      </h3>
      <div class="card" style="position: relative;">
        <div class="bg">
          <h2 style="margin-bottom: 30px; text-align: center; margin-left: -1%; margin-top: 10px; color: var(--theme-color);">
            <div id="time"></div>
          </h2>
          <div class="searchbar" style="position: relative;">
            <div class="searchbar-wrapper">
              <div class="search-icon-wrapper">
                <span class="search-icon searchbar-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                    ></path>
                  </svg>
                </span>
              </div>
              <form id="uv-form" class="searchbar-center" style="flex-grow: 1;">
                <input
                  id="uv-address"
                  type="text"
                  class="searchbar-input"
                  maxlength="2048"
                  autocapitalize="off"
                  autocomplete="off"
                  title="Search"
                  role="combobox"
                  placeholder="Search Anything"
                />
              </form>
            </div>
          </div>
          <div id="splash-text" style="margin-top: 50px; font-size: 12px">Loading...</div>
        </div>
      </div>
      <div id="suggestion-list" class="suggestion-list"></div>
    </center>
    <div style="display: inline-flex; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);">
      <a class="footer" target="_blank" href="https://status.lightgo.app">Status</a>
      <a class="footer" style="margin-left: 10px; margin-right: 10px" target="_blank" href="https://discord.lightgo.app">Discord</a>
      <a class="footer" target="_blank" href="https://github.com/nightproxy/light">GitHub</a>
    </div>
    <script>
      function myClock() {
        setTimeout(function () {
          const d = new Date();
          const n = d.toLocaleTimeString();
          document.getElementById("time").innerHTML = n;
          myClock();
        }, 1);
      }
      myClock();

      function splash() {
        var splashes = [
          "Join our Discord!",
          "Fast, Simple, Easy.",
          "Made by Stella!",
          "Welcome to v2!",
          "Check out settings!",
        ];
        var lastIndex = parseInt(localStorage.getItem("splashIndex")) || 0;
        var nextIndex = (lastIndex + 1) % splashes.length;
        document.getElementById("splash-text").textContent = splashes[nextIndex];
        localStorage.setItem("splashIndex", nextIndex);
      }
      splash();

      const searchbar = document.getElementById("uv-address");
      const suggestionList = document.getElementById("suggestion-list");

      searchbar.addEventListener("input", async (event) => {
        const query = event.target.value.trim();
        if (query === "") {
          suggestionList.innerHTML = "";
          return;
        }
        const response = await fetch(`/search=${query}`).then((res) => res.json());
        suggestionList.innerHTML = response
          .map((suggestion) => `<div>${suggestion}</div>`)
          .join("");
      });

      searchbar.addEventListener("focus", () => {
        suggestionList.style.display = "block";
      });

      searchbar.addEventListener("blur", () => {
        setTimeout(() => {
          suggestionList.style.display = "none";
        }, 200);
      });

      suggestionList.addEventListener("click", (event) => {
        if (event.target.tagName === "DIV") {
          searchbar.value = event.target.textContent;
          suggestionList.style.display = "none";
        }
      });
    </script>
  </body>
</html>
